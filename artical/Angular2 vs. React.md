#Angular2 vs. React
[原文地址](https://medium.freecodecamp.com/angular-2-versus-react-there-will-be-blood-66595faafd51?hmsr=toutiao.io&utm_medium=toutiao.io&utm_source=toutiao.io)
by Cory House

ng是一个框架，而react是一个库。有些人认为比较他们是不合理的，实际上并不是这样。

>在ng和re之间做出选择就好像选择现成电脑和自己攒机器一样。


本文分析了这两种方式的优点。比较了re和ng的语法和组件模型。

##Angular 2 的优势

###低决策成本

既然ng是一个框架，他提供更多的选项和功能。而对re而言，你一定会加入一些其他的库来构建一个真正的app。你也许需要路由模块，你就要为路由选择库，执行单向流，网络接口调用，测试，依赖关系管理等等。这就是为什么re有这么多的初学者工具包。

ng提供了更多的选项，这有助于你更迅速的做出决策。这种强制的一致性也有助于新员工更快适应，让团队之间的切换更加顺畅。


我很欣赏ng的核心团队引入了Typescript，它的优点是：

###TypeScript = 清晰的路径
当然，TS并不被所有人喜欢，但ng2对于他的使用是JavaScript的一个巨大的胜利。网上React的例子非常不一致 - 在ES5和ES6上它的数量几乎相等，而且它目前提供三种不同的方式来声明组件。这给新人带来了困惑。（ng也使用了 decorators  而非extends  -很多人也会倾向这种方式）。

虽然ng2并没有require TS，ng的核心团队确实使用了它，并且在官方文档中默认使用TS。这意味着人们对相关的例子和开源项目更容易感到熟悉和一致。ng已经提供了清晰的例子来说明如何利用TS编译器。（当然需要承认，不是每个人都接纳TS，但我怀疑它不久后会成为事实上的标准）。这种一致性应该有助于避免React带来的混乱和过度决策。

###减少变动

2015年的是令JavaScript疲惫的一年。re是一个重要的贡献者。而且，由于的re还没有发布1.0版本，未来仍然可能发生更重大的变化。re的生态系统继续以快速的速度增长，特别是围绕在long list flux flavors和路由。这意味着在re1.0版本发布或者有重大更新的时候，你现在写的任何东西都会变得过时。


相比之下，ng2作为一个成熟全面的框架的系统化改造，显得更加小心谨慎。所以ng不太可能在发布之后产生巨大的变化。作为一个全面的框架，当你选择ng的时候，你可以信任一个团队对未来做出谨慎的决定，在re中，你的责任是将一群不同的，快速演进的开源库整合成一个全面完整的可以一起良好运行的系统。这显然是耗时，令人沮丧，和一个永无止境的工作。
###广泛的工具支持

正如你在下面看到的，我认为re的jsx更胜一筹。但是，你需要工具来支持JSX。react已经变得如此流行，那么工具支持也仅仅是目前的问题，但是新的工具如IDEs或linters看起来并不是一日之功。ng2的模板存储在一个字符串标记或单独的HTML文件之中，所以他不需要其他特殊的支持（虽然正在研发一些能够只能转换ng模板字符串的工具）

###对web component友好

ng2的设计包含了web components标准。简而言之，使用ng2编写的组建会笔react组件更容易转换成普通的本地web components。当然，浏览器对此的支持依然薄弱，但是这一点在长期来看回事一个巨大的优势。


ng的方式也有他自己的问题，这通过讨论re的优势会看的更加明显。
##React 优点
###JSX
JSX是一个类HTML语法，他可以编译成javascript。标记和代码融合在同一个文件里。这意味着代码的编译给你提供了一种方式，可以引用你的组件的函数和变量。相比之下，ng的基于字符串的模板有通常的缺点：在编辑器中没有颜色区分，没有代码补全，存在运行时错误。你可能会希望有一个简单的报错提示，但是ng的团队创造了他们自己的HTML解释器来解决这个问题。(nb!)

如果你不喜欢ng的字符串模板，你可以将模板分成独立的文件，但是你又走回了所谓的‘老路’上去。同时编写两个文件，没有代码补齐和编译时检测的辅助。这在你接触re之前似乎不是一件大事。在一个单一的**编译时检查文件**的组成成分是JSX是如此特别的一大原因。

####对比一下ng2和react如何处理丢失标签

当你在JSX中输入错字时，他不会被编译。你会立即知道究竟哪一行出现了错误。当你忘记闭合标签或引用不存在的属性的时候他会立即告诉你。实际上，**JSX编译器会定位具体的错误行数，这会根本上加快开发速度。**

相反，当你在ng2中输入了错误的变量引用，什么都不会发生。ng2会在运行时默默的出错而不是在编译时提醒你。他的报错很缓慢，当我加载了应用之后，我会很困惑为什么我的数据没有展示出来~
###React是JavaScript为中心的

二者最基本的区别在于，**ng2仍然是html为核心的而不是js**。ng2没有能解决它最基础的设计问题：

>ng2仍然将JS放到HTML中，而RE将HTML放到JS中。


我需要强调一下这个思想上的差异。它从根本上影响了开发体验。ng的HTML为中心的设计留下了它最大的弱点。反观JSX，我们会看到JS比HTML强大太多了。因此，**强化JS支持标记远远比强化标记支持JS合理的多。**HTML和JS需要某种方式连接在一起，并且re以JS为中心的方式从根本上优于ng，ember以及knockout的HTML为中心的方式

###react的设计=简单

ng2沿用了ng1的方式，试图让HTML更加强大。所以你必须使用ng2的特殊语法来完成，诸如循环和判断这类的简单任务。例如，ng2通过两种完全不同的语法提供了单向和双向绑定。
```Javascript
{{myVar}} //One-way binding
ngModel="myVar" //Two-way binding
```
在react中，绑定标记不会改变在此基础上的决定（他是在其他地方进行处理，因为我认为他应该是）。他看起来应该是
```Javascript
{myVar}
```

ng2支持内联主模板，他的语法是：
```html
<ul>
	<li *ngFor="#hero of heroes">
		{{hero.name}}
	</li>
</ul>
```


上面的代码片段遍历了heroes数组。请注意以下几点：
* 通过前置*号，声明‘主模板’
* 通过#号声明一个局部模板变量，这个重要概念看起来是无用的（如果愿意，你也可以用var）
* ngFor通过ng特定的属性为HTML添加了循环语义

react的纯JS*：
```html
<ul>
	{ heroes.map(hero =>
		<li key={hero.id}>{hero.name}</li>
	)}
</ul>
```

既然JS本身支持循环，re的JSX可以很轻松的使用JS的这些强大功能，并且还可以完成map，filter等功能。


看看 Angular 2 Cheat Sheet 表吧。那并不是HTML，不是JS，是ng


React在他的语法和简单概念上很独特。来看看现在流行的js框架和库的迭代方式：
* Ember: {{# each}}
* Angular 1: ng-repeat
* Angular 2: ngFor
* Knockout: data-bind=”foreach”
* React: 仅仅使用JS :)


除了react，其他的都使用了框架独有的方式替换了js原生的琐碎的循环。这是react的亮点。他用js来控制标记，所以并不需要其他奇怪的语法。

ng2奇怪的click绑定
```Javascript
(click)=”onSelect(hero)"
```
相对的，React的普通Javascript
```Javascript
onClick={this.onSelect.bind(this, hero)}
```

因为react引入了虚拟的事件系统（ng2也这样做了），所以你不必担心内联声明事件处理会对性能造成影响。


如果不是必要的，为什么还要使用框架的特殊语法呢？为什么不使用js来解决？

###超棒的开发体验

JSX的代码支持补全，编译检测，和丰富的报错提示，这都会造就完美的开发体验。
###文档大小
下面是压缩过的源码大小对比：

* Angular 2: 566k (766k with RxJS)
* Ember: 435k
* Angular 1: 143k
* React + Redux: 139k

作者：抱歉，这里的数据来源是TodoMVC程序并非单纯的框架。而且，ng2的数字会在最终发布时有所下降。此处列出的数字是框架的压缩过（无gzip）的数据


为了进行真实的比较，我通过ng2和re（新手工具包）实现了Tour of Heroes app，结果如下：
* Angular 2: 764k minified
* React + Redux: 216k minified


所以 ，在简单app的条件下，ng2的大小是三倍的reflux的大小。ng2在发布前真的要减小体积。


现在我要说，我觉得对于框架体积的对比可能被夸大了。
    
>无论是否通过框架构建，大型的app往往有百kb以上的代码量，通常会更多。开发者需要对复杂的软件抽象构件，并且不论他们是手写还是来自框架，都会影响app的性能。

>即使你完全消除了框架，很多app仍然有百kb以上的代码。—Tom Dale in JavaScript Frameworks and Mobile Performance

Tom是对的。诸如ng和ember的框架更加庞大因为他们在架子之外提供许多别的功能。


但是，我的关注点在于：许多app并不需要庞大框架内的每一样东西。在一个不断增加微服务，微app，和单一功能package的世界中，**React给予你让你通过正确选择你所需的功能来优化app大小的力量。**在一个超过20万npm模块的世界中，这是一个强大的地方。

###react使用了unix哲学

react是一个库。这正是和ng，ember一样构件大型全面框架相反的理念。所以让你选择react的时候，你可以选择最优的库来解决你的问题。js更新的很快，而且react允许你将app中一小部分替换掉，你可以使用更合适的lib，而不是环顾四周等待框架的更新。

Unix的思想已经经过了时间的检测：
	小型，可组合的，单一用途的工具哲学永远不会过时。

react是一个专一的，可组合的，单一目标的工具，运行在很多大型网站中。这很好的说明了未来的方向。（当然，ng也被很多巨头使用）
##总结

ng2相较于ng1有很大改进。新的组建模型笔ng1的指令更容易掌握，他支持同构/通用渲染，而且他使用了虚拟DOM在性能上提升了3至10倍。这些改变按让ng2变得非常有竞争力。不可否认的是，ng2功能全面，武断的特性会在减少“JavaScript fatigue”方面有明显优势。


然而，ng2的体积和语法令我彷徨。ng的HTML中心的设计让他比re简单的js中心模型复杂很多。在re中，你不需要学习框架特有的html语法，比如ngWhatever。你在工作中只写js，我相信这将是方向。
